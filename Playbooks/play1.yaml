---
- name:  created files 
  hosts: localhost
  gather_facts: yes
  tasks: 
    - name: create a file on localhost
      file: 
        name: repo.json
        state: touch
      
    - name: enter some content in json file
      copy:
        content: '"remote_url: https://github.com/adityasai344/ansible-project.git"'
        dest: repo.json
      ignore_errors: yes

    - name: print 'os_family'
      ansible.builtin.debug:
        msg: This is {{ ansible_os_family }} server

    - name: print OS details only if it is rhel
      command: cat /etc/os-release
      when: ansible_os_family == "Debian"
      register: osrelease

    - name: print selinux status only when selinux disabled
      ansible.builtin.command: getenforce
      when: ansible_facts.selinux.status == 'Disabled'
      register: selinuxstatus
      ignore_errors: yes

    - name: print selinux status output
      debug:
        var: selinuxstatus

    - name: Re-create a redis container
      docker_container:
        name: myredis
        image: redis
        command: redis-server --appendonly yes
        state: present
        recreate: yes
        exposed_ports:
          - 6379
        volumes_from:
          - mydata
      

    - name: print os-details
      ansible.builtin.debug:
        var: osrelease
      